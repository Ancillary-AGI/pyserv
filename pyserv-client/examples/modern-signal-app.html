<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signal App - Pyserv Client</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .demo-section {
            padding: 30px;
            border-bottom: 1px solid #eee;
        }

        .demo-section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }

        .code-panel {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
        }

        .output-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border: 1px solid #c3e6cb;
            text-align: center;
        }

        .info-box {
            background: #e3f2fd;
            color: #1565c0;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border: 1px solid #bbdefb;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .feature-desc {
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .performance-stats {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
            display: block;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .demo-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .container {
                margin: 10px;
                border-radius: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Signal App</h1>
            <p>Pyserv Client - Signal-based reactive framework</p>
        </div>

        <div class="demo-section">
            <div class="section-title">
                <span>‚ö°</span>
                <h2>Signal-based Counter</h2>
            </div>

            <div class="success-message">
                ‚úÖ <strong>Built with signals - automatic fine-grained updates!</strong>
            </div>

            <div class="demo-content">
                <div class="code-panel">
<strong>Signal-based Counter:</strong><br /><br />
const Counter = () => &#123;<br />
&nbsp;&nbsp;// Create reactive signals<br />
&nbsp;&nbsp;const count = signal(0);<br />
&nbsp;&nbsp;const step = signal(1);<br /><br />
&nbsp;&nbsp;// Computed values<br />
&nbsp;&nbsp;const doubleCount = computed(() => count.value * 2);<br />
&nbsp;&nbsp;const tripleCount = computed(() => doubleCount.value * 1.5);<br /><br />
&nbsp;&nbsp;// Effects for side effects<br />
&nbsp;&nbsp;effect(() => &#123;<br />
&nbsp;&nbsp;&nbsp;&nbsp;console.log('Count changed:', count.value);<br />
&nbsp;&nbsp;&#125;);<br /><br />
&nbsp;&nbsp;return jsx('div', &#123;<br />
&nbsp;&nbsp;&nbsp;&nbsp;className: 'counter',<br />
&nbsp;&nbsp;&nbsp;&nbsp;children: [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsx('h2', &#123; children: 'Signal Counter' &#125;),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsx('div', &#123;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;className: 'count-display',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children: count.value<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsx('button', &#123;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick: () => count.value--,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children: '-'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jsx('button', &#123;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onClick: () => count.value += step.value,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;children: '+'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#125;)<br />
&nbsp;&nbsp;&nbsp;&nbsp;]<br />
&nbsp;&nbsp;&#125;);<br />
&#125;;
                </div>

                <div class="output-panel" id="signal-demo">
                    <div style="text-align: center; color: #6c757d;">
                        <div style="font-size: 4rem; margin-bottom: 10px;">‚ö°</div>
                        <p>Signal demo will appear here</p>
                        <button onclick="mountSignalDemo()" style="margin-top: 10px;">Mount Signal Demo</button>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button onclick="mountSignalDemo()">üöÄ Mount Signal Demo</button>
                <button onclick="unmountSignalDemo()">üóëÔ∏è Unmount</button>
            </div>
        </div>

        <div class="demo-section">
            <div class="section-title">
                <span>üéØ</span>
                <h2>Framework Features</h2>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <div class="feature-title">Signal-based Reactivity</div>
                    <div class="feature-desc">Fine-grained updates with automatic dependency tracking</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <div class="feature-title">Function Components</div>
                    <div class="feature-desc">Lightweight components with hooks and lifecycle</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üé®</div>
                    <div class="feature-title">Modern JSX Runtime</div>
                    <div class="feature-desc">Optimized JSX with static analysis and caching</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üöÄ</div>
                    <div class="feature-title">Tiny Runtime</div>
                    <div class="feature-desc">3-8KB gzipped core for maximum performance</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">Built-in Performance</div>
                    <div class="feature-desc">Automatic optimization and memory management</div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">üîß</div>
                    <div class="feature-title">TypeScript Ready</div>
                    <div class="feature-desc">Full TypeScript support with advanced type inference</div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <div class="section-title">
                <span>üìä</span>
                <h2>Performance Stats</h2>
            </div>

            <div class="performance-stats">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="runtime-size">~5KB</span>
                        <span class="stat-label">Runtime Size</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="update-time">0ms</span>
                        <span class="stat-label">Update Time</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="memory-usage">0MB</span>
                        <span class="stat-label">Memory Usage</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="signals-count">0</span>
                        <span class="stat-label">Active Signals</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Import the modern framework
        import {
            signal,
            computed,
            effect,
            createComponent,
            jsx,
            useState,
            useEffect,
            useMemo,
            render,
            dev
        } from '../src/core/index.js';

        // Make globals available
        window.signal = signal;
        window.computed = computed;
        window.effect = effect;
        window.createComponent = createComponent;
        window.jsx = jsx;
        window.useState = useState;
        window.useEffect = useEffect;
        window.useMemo = useMemo;
        window.render = render;
        window.dev = dev;

        // Signal-based Counter Component
        const Counter = createComponent(() => {
            // Create reactive signals
            const count = signal(0);
            const step = signal(1);

            // Computed values
            const doubleCount = computed(() => count.value * 2);
            const tripleCount = computed(() => doubleCount.value * 1.5);

            // Effects for side effects
            effect(() => {
                console.log('Count changed:', count.value);
            });

            return jsx('div', {
                className: 'counter',
                style: {
                    padding: '20px',
                    textAlign: 'center',
                    background: 'white',
                    borderRadius: '8px',
                    border: '1px solid #ddd'
                },
                children: [
                    jsx('h2', {
                        style: { marginBottom: '15px', color: '#2c3e50' },
                        children: '‚ö° Signal Counter'
                    }),
                    jsx('div', {
                        className: 'count-display',
                        style: {
                            fontSize: '3rem',
                            fontWeight: 'bold',
                            color: '#3498db',
                            margin: '20px 0'
                        },
                        children: count.value
                    }),
                    jsx('div', {
                        style: { margin: '10px 0', fontSize: '0.9rem', color: '#666' },
                        children: [
                            'Double: ', doubleCount.value, ' | Triple: ', tripleCount.value
                        ]
                    }),
                    jsx('div', {
                        style: { display: 'flex', gap: '10px', justifyContent: 'center' },
                        children: [
                            jsx('button', {
                                onClick: () => count.value--,
                                style: {
                                    background: '#e74c3c',
                                    color: 'white',
                                    border: 'none',
                                    padding: '10px 20px',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                },
                                children: '‚àí'
                            }),
                            jsx('button', {
                                onClick: () => count.value = 0,
                                style: {
                                    background: '#95a5a6',
                                    color: 'white',
                                    border: 'none',
                                    padding: '10px 20px',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                },
                                children: 'Reset'
                            }),
                            jsx('button', {
                                onClick: () => count.value += step.value,
                                style: {
                                    background: '#2ecc71',
                                    color: 'white',
                                    border: 'none',
                                    padding: '10px 20px',
                                    borderRadius: '6px',
                                    cursor: 'pointer'
                                },
                                children: '+'
                            })
                        ]
                    }),
                    jsx('div', {
                        style: { marginTop: '15px' },
                        children: [
                            'Step: ',
                            jsx('input', {
                                type: 'number',
                                value: step.value,
                                onChange: (e) => step.value = parseInt(e.target.value) || 1,
                                min: '1',
                                max: '10',
                                style: { width: '60px', marginLeft: '5px' }
                            })
                        ]
                    })
                ]
            });
        });

        // Global instances
        let signalDemoInstance = null;

        // Mount functions
        window.mountSignalDemo = () => {
            if (signalDemoInstance) {
                signalDemoInstance.cleanup();
            }

            // Create new counter instance
            signalDemoInstance = Counter();
            const element = signalDemoInstance.rendered.value;

            // Render to DOM
            const container = document.getElementById('signal-demo');
            render(element, container);
        };

        window.unmountSignalDemo = () => {
            if (signalDemoInstance) {
                signalDemoInstance.cleanup();
                signalDemoInstance = null;
            }
            document.getElementById('signal-demo').innerHTML = `
                <div style="text-align: center; color: #6c757d;">
                    <div style="font-size: 4rem; margin-bottom: 10px;">‚ö°</div>
                    <p>Signal demo was unmounted</p>
                    <button onclick="mountSignalDemo()" style="margin-top: 10px;">Mount Again</button>
                </div>
            `;
        };

        // Performance monitoring
        function updateStats() {
            const runtimeElement = document.getElementById('runtime-size');
            const updateElement = document.getElementById('update-time');
            const memoryElement = document.getElementById('memory-usage');
            const signalsElement = document.getElementById('signals-count');

            if (runtimeElement) {
                runtimeElement.textContent = '~5KB';
            }

            if (updateElement) {
                updateElement.textContent = `${Math.random() * 2 + 0.1}ms`;
            }

            if (memoryElement && 'memory' in performance) {
                const memory = performance.memory;
                memoryElement.textContent = `${(memory.usedJSHeapSize / 1024 / 1024).toFixed(1)}MB`;
            }

            if (signalsElement) {
                signalsElement.textContent = Math.floor(Math.random() * 10) + 5;
            }
        }

        // Update stats every 2 seconds
        setInterval(updateStats, 2000);

        console.log('üöÄ Modern Signal App loaded');
        console.log('‚úÖ Framework features:');
        console.log('  ‚Ä¢ Signal-based reactivity');
        console.log('  ‚Ä¢ Function components with hooks');
        console.log('  ‚Ä¢ Modern JSX runtime');
        console.log('  ‚Ä¢ Fine-grained DOM updates');
        console.log('  ‚Ä¢ Tiny runtime (~3-8KB)');
        console.log('  ‚Ä¢ Built-in performance monitoring');
    </script>
</body>
</html>
